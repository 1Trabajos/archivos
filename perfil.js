var firebaseConfig={apiKey:"AIzaSyC5QFujt2nmR40p6lXh3Yft7e7gxsvu7oY",authDomain:"morenitta-57ed3.firebaseapp.com",projectId:"morenitta-57ed3",storageBucket:"morenitta-57ed3.appspot.com",messagingSenderId:"813042769292",appId:"1:813042769292:web:e9bf4d9ba0eb80919ccaa9"};function login(){var e=document.getElementById("email").value,n=document.getElementById("password").value,r=document.getElementById("error-message");e&&n?(r.innerText="Verificando credenciales...",firebase.auth().signInWithEmailAndPassword(e,n).then((e=>{verificarAdmin(e.user)})).catch((e=>{console.error(e),"auth/user-not-found"===e.code||"auth/wrong-password"===e.code?r.innerText="Credenciales incorrectas. Verifica tu correo y contraseña.":r.innerText="Error al iniciar sesión: "+e.message}))):r.innerText="Por favor, completa todos los campos"}function verificarAdmin(e){if(e){var n=document.getElementById("error-message");n.innerText="Verificando permisos de administrador...",firebase.database().ref("admis").orderByChild("email").equalTo(e.email).once("value",(r=>{if(r.exists()){var a=Object.values(r.val())[0];document.getElementById("login-container").style.display="none",document.getElementById("admin-info").style.display="block",document.getElementById("admin-name").innerText="Nombre: "+a.nombre,document.getElementById("admin-email").innerText="Correo: "+e.email;var t=new Date,i=t.toLocaleDateString("es-ES"),o=t.toLocaleTimeString("es-ES");document.getElementById("admin-login-time").innerText="Ingreso: "+i+" "+o}else firebase.auth().signOut(),n.innerText="No tienes permisos de administrador. Si crees que esto es un error, contacta al administrador principal."})).catch((e=>{console.error(e),n.innerText="Error al verificar permisos: "+e.message,firebase.auth().signOut()}))}}function logout(){firebase.auth().signOut().then((()=>{location.reload()})).catch((e=>{console.error(e),alert("Error al cerrar sesión: "+e.message)}))}firebase.initializeApp(firebaseConfig),firebase.auth().onAuthStateChanged((e=>{e&&verificarAdmin(e)})),document.getElementById("password").addEventListener("keyup",(function(e){"Enter"===e.key&&login()}));